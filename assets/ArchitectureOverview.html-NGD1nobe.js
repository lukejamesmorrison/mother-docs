import{_ as r,c as u,a as s,d as e,b as o,e as a,w as t,r as c,o as d}from"./app-B2xDDnaV.js";const m={},k={class:"table-of-contents"};function v(h,n){const l=c("router-link"),i=c("Mermaid"),p=c("RouteLink");return d(),u("div",null,[n[21]||(n[21]=s("h1",{id:"architecture-overview",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#architecture-overview"},[s("span",null,"Architecture Overview")])],-1)),n[22]||(n[22]=s("div",{class:"hint-container warning"},[s("p",{class:"hint-container-title"},"Warning"),s("p",null,[a("Mother requires a "),s("strong",null,"Remote Control block"),a(" to function. This allows us to leverage autopilot and flight data across our modules easily.")])],-1)),s("nav",k,[s("ul",null,[s("li",null,[e(l,{to:"#entity-diagram"},{default:t(()=>n[0]||(n[0]=[a("Entity Diagram")])),_:1})]),s("li",null,[e(l,{to:"#progam-lifecycle"},{default:t(()=>n[1]||(n[1]=[a("Progam Lifecycle")])),_:1})]),s("li",null,[e(l,{to:"#command-lifecycle"},{default:t(()=>n[2]||(n[2]=[a("Command Lifecycle")])),_:1})]),s("li",null,[e(l,{to:"#mother-instance"},{default:t(()=>n[3]||(n[3]=[a("Mother Instance")])),_:1}),s("ul",null,[s("li",null,[e(l,{to:"#system-attributes"},{default:t(()=>n[4]||(n[4]=[a("System Attributes")])),_:1})]),s("li",null,[e(l,{to:"#boot"},{default:t(()=>n[5]||(n[5]=[a("Boot")])),_:1})]),s("li",null,[e(l,{to:"#run"},{default:t(()=>n[6]||(n[6]=[a("Run")])),_:1})]),s("li",null,[e(l,{to:"#registering-modules"},{default:t(()=>n[7]||(n[7]=[a("Registering Modules")])),_:1})])])])])]),n[23]||(n[23]=s("h2",{id:"entity-diagram",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#entity-diagram"},[s("span",null,"Entity Diagram")])],-1)),e(i,{id:"mermaid-16",code:"eJytU11v2jAUfedXWJlQXkay0U2bWItUAquiNRIa1V6ianKSS2Lhj8g2BbTy3+eENHGBPkwDJD58zz33nOObfv9PDyHCiR6h6hdCri6AgTtCboIVuO+tw19YEpxQUKZ6ANe1UhKG5S4QVMiq791kMvw8/Nq02pAH2OoOtlwuz2AmQmYgO9SX4IN52UCGCZ+s8qq6KYh+0VjXuMjgwFCVJWR2kRIOLXFCcbqyqwpSwTPbyAl7CzkSecKlQWryKpPvw+p9DnOWq4btzee+t+/3e71c4rJA9z/r80iY65Cxc/h2HtFgMH6eQgk8U0jwZxQGQkIksjWF2LH+OI9W/0nXXAozhh1DAsFKoSBDYmmYZ1sNXBHBW/qjEzOjZlDr5CDamt+aD6Jh7Bhihnk2WatG16FyFV9jVEhY3rieP4UnoKIE6Xcsyr+lphGnXqEZdZHSOwo3blolOEJ1ft+QNqs2yMx9SayNthHigoM7bjqvfTy2Z36KHc/zXqSbRI49HJlsW2fRx9iZE6Ut+13tKnbuSV7oM6V24quBzRV0CRRal2rk+znRxTrxUsF8hukGSzDmnvxo+mOwmPkbsiL+wmSZiK1nht3OQy/kOWbgRbs7SbKG10Uayxz0jfPbxMRXzj9l15B02TUH1ZaguQnicqrDaBdy84DkRnu1JmtO0lrLYqc0/KeP8C54y4O1e5fwUEX/AJIRjukllJ/yvWWkXa+/HAzSGA=="}),n[24]||(n[24]=o(`<h2 id="progam-lifecycle" tabindex="-1"><a class="header-anchor" href="#progam-lifecycle"><span>Progam Lifecycle</span></a></h2><p>Mother runs at a default speed of 6 ticks per second (Update10). This tolerance should be acceptable for most use cases. Each program cycle we <em>run</em> Mother.</p><div class="code-block-title"><div class="code-block-title-bar"><span class="title" data-title="Program.cs">Program.cs</span></div><div class="language-csharp line-numbers-mode" data-highlighter="prismjs" data-ext="cs"><pre><code><span class="line"><span class="token comment">// The game will run this method every cycle</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> argument<span class="token punctuation">,</span> <span class="token class-name">UpdateType</span> updateSource<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// So we delegate to Mother</span></span>
<span class="line">    Mother<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span>argument<span class="token punctuation">,</span> updateSource<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div>`,3)),s("p",null,[n[9]||(n[9]=a("The ")),n[10]||(n[10]=s("code",null,"Run",-1)),n[11]||(n[11]=a(" method is responsible for running all Extension Modules, managing incoming communications, and running scheduled actions. See ")),e(p,{to:"/Framework/Developer/CoreModules/Clock.html"},{default:t(()=>n[8]||(n[8]=[a("Clock")])),_:1}),n[12]||(n[12]=a(" for more information on scheduling and delaying actions."))]),e(i,{id:"mermaid-27",code:"eJyFj19LwzAUxd/7KS5I7YsDGYgyQTEtig++uOHL2EPa3LWhbVKSVB1bv7tN/2zRFUwghHN+5+TG9/ceABfcLMDeAAKTYYnBAoKYagyuHPGDKk7jAnXr9nDnVYqXVO1CWUhlcxeEzG/md0PURVb4bU7YdrudYIhUDNWJug2v2+WCJeWC5Kl1vzJuxhk7T0iGfYO1FTLXLLjAY3Fc0CR3XY2JFOzXR57ndk9Cf8Y8azOoDP+nbGQmuzqsac/Ga3zf81JFqwxWUac/rd9rsYHZ7OFwKWJd3UfYlpXt/6CuGDW4lLVKsPcOQPauCqtdhY+2GoA4HaEsSyrYGArXg0BqvTmD31Brmh5fiNavop0gVZwNzhLVJ0+wT4Y2CS92aggLmeS9HPWy9wPzSLge"}),n[25]||(n[25]=o(`<div class="code-block-title"><div class="code-block-title-bar"><span class="title" data-title="Mother.cs">Mother.cs</span></div><div class="language-csharp line-numbers-mode" data-highlighter="prismjs" data-ext="cs"><pre><code><span class="line"><span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Run</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> argument<span class="token punctuation">,</span> <span class="token class-name">UpdateType</span> updateSource<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// Process commands/routines from player input</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">string</span><span class="token punctuation">.</span><span class="token function">IsNullOrWhiteSpace</span><span class="token punctuation">(</span>argument<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>updateSource <span class="token operator">==</span> UpdateType<span class="token punctuation">.</span>Terminal <span class="token operator">||</span> updateSource <span class="token operator">==</span> UpdateType<span class="token punctuation">.</span>Trigger <span class="token operator">||</span> updateSource <span class="token operator">==</span> UpdateType<span class="token punctuation">.</span>Script<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">        CommandBus<span class="token punctuation">.</span><span class="token function">RunTerminalCommand</span><span class="token punctuation">(</span>argument<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// Process IGC messages</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>updateSource <span class="token operator">==</span> UpdateType<span class="token punctuation">.</span>IGC<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">        IntergridMessageService<span class="token punctuation">.</span><span class="token function">HandleIncomingIGCMessages</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// Process scheduled tasks</span></span>
<span class="line">    Clock<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><h2 id="command-lifecycle" tabindex="-1"><a class="header-anchor" href="#command-lifecycle"><span>Command Lifecycle</span></a></h2>`,2)),s("p",null,[n[14]||(n[14]=a("When a player runs a command, it is passed to the ")),e(p,{to:"/Framework/Developer/CoreModules/CommandBus.html"},{default:t(()=>n[13]||(n[13]=[a("Command Bus")])),_:1}),n[15]||(n[15]=a(". The Command Bus then executes the command on the appropriate module. The module may then emit an event, which is received by subscribed modules."))]),e(i,{id:"mermaid-36",code:"eJx1j09rhDAQxe9+ikARL93LQqF4WGi2ll4KpYXeYxx2h80fG+O2S/G7N8boxmoRROf93ps3afqTEIIKbU76L0IyewQJWU6ykjWQ3UbDD2aQlQIapw6w12qDkpnLXgttet8Npdu77X2wxgjVpgIzgQaqGJIMFT0deuXriHbc7TWlKxjcK0aBCqbQUjB+itUGuFZVXHCRPiF/Ci6yLBiLs1uftv2zxqxmeaxz7y7p0jRJGvhsQXF4RHYwTHq5Zi6AY82UJa+CXcAsxnstJVMVbZuF9KKrVsDDYl6cQdn/DTTxQvjZ7HYjn5P3tmy4wRKI1UPMwA7dHHptk5NCufvHfh67qg4N7Rz3Dby1MCODOFteSAzdPTIKmymLOqYfkjfggGeIo/o7JurZrREQsn4BvmfjXQ=="}),n[26]||(n[26]=o(`<h2 id="mother-instance" tabindex="-1"><a class="header-anchor" href="#mother-instance"><span>Mother Instance</span></a></h2><h3 id="system-attributes" tabindex="-1"><a class="header-anchor" href="#system-attributes"><span>System Attributes</span></a></h3><p>Mother makes several properties widely available to your script to assist with common lookups.</p><p>For example, we can access the <a href="https://github.com/malware-dev/MDK-SE/wiki/Sandbox.ModAPI.Ingame.IMyIntergridCommunicationSystem" target="_blank" rel="noopener noreferrer">Intergrid Communication System (IGC)</a> and <a href="https://github.com/malware-dev/MDK-SE/wiki/VRage.Game.ModAPI.Ingame.IMyCubeGrid" target="_blank" rel="noopener noreferrer">Grid</a> instance via the following accessors on Mother:</p><div class="code-block-title"><div class="code-block-title-bar"><span class="title" data-title="ExampleModule.cs">ExampleModule.cs</span></div><div class="language-csharp line-numbers-mode" data-highlighter="prismjs" data-ext="cs"><pre><code><span class="line"><span class="token comment">// via Mother (recommended)</span></span>
<span class="line"><span class="token class-name">IntergridCommunicationSystem</span> IGC <span class="token operator">=</span> Mother<span class="token punctuation">.</span>IGC</span>
<span class="line"><span class="token class-name">IMyCubeGrid</span> Grid <span class="token operator">=</span> Mother<span class="token punctuation">.</span>Grid</span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span class="token comment">// via the Program instance</span></span>
<span class="line"><span class="token class-name">IntergridCommunicationSystem</span> IGC <span class="token operator">=</span> Mother<span class="token punctuation">.</span>Program<span class="token punctuation">.</span>IGC</span>
<span class="line"><span class="token class-name">IMyCubeGrid</span> Grid <span class="token operator">=</span> Mother<span class="token punctuation">.</span>Program<span class="token punctuation">.</span>Me<span class="token punctuation">.</span>CubeGrid</span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><h3 id="boot" tabindex="-1"><a class="header-anchor" href="#boot"><span>Boot</span></a></h3><p>When Mother boots, many of the core modules do most of their work. This aims to save a great deal of computation at runtime, reducing impact on gameplay. During boot, the <code>Boot</code> method is called on all Core Modules, then all Extension Modules.</p>`,7)),e(i,{id:"mermaid-56",code:"eJzjSi9KLMhQCHHiUgACx+ig1PTM4pLUIgXn/KJUBd/8lNKc1OJYiKSCrq6dghNCiWtFSWpecWZ+HlydAlihE1ihc7RTfn4JFnOcwdIuEGlMM7i4APxELQk="}),n[27]||(n[27]=s("h3",{id:"run",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#run"},[s("span",null,"Run")])],-1)),e(i,{id:"mermaid-60",code:"eJxLL0osyFDwCeJSAALH6KDSvFgIU0FX107BKRrMAQGgjAKc45xflKrgm59SmpNaDBeMhcg7gXU6g4yCCLhWlKTmFWfm58F0xHIBAD6pHHk="}),n[28]||(n[28]=o(`<h4 id="scheduling-an-action-for-run" tabindex="-1"><a class="header-anchor" href="#scheduling-an-action-for-run"><span>Scheduling an Action for Run</span></a></h4><p>Sometimes it may be important to define custom time intervals you wish for a module or method to run over. Mother&#39;s clock makes this easy.</p><p>Mother updates the Almanac every 2 seconds using the <code>Schedule</code> method.</p><div class="code-block-title"><div class="code-block-title-bar"><span class="title" data-title="ExampleModule.cs">ExampleModule.cs</span></div><div class="language-csharp line-numbers-mode" data-highlighter="prismjs" data-ext="cs"><pre><code><span class="line"><span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Boot</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    Mother<span class="token punctuation">.</span>Clock<span class="token punctuation">.</span><span class="token function">Schedule</span><span class="token punctuation">(</span><span class="token function">DoExampleThings</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">DoExampleThings</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// Do something</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><h4 id="queuing-an-action-for-later-execution" tabindex="-1"><a class="header-anchor" href="#queuing-an-action-for-later-execution"><span>Queuing an action for later execution</span></a></h4>`,5)),s("p",null,[n[17]||(n[17]=a("You can queue and action for execution later with the ")),n[18]||(n[18]=s("code",null,"QueueForLater",-1)),n[19]||(n[19]=a(" method. This is used to defer commands for later execution when the ")),e(p,{to:"/Framework/IngameScript/CommandLineInterface.html"},{default:t(()=>n[16]||(n[16]=[s("code",null,"wait",-1)])),_:1}),n[20]||(n[20]=a(" command is used."))]),n[29]||(n[29]=o(`<div class="code-block-title"><div class="code-block-title-bar"><span class="title" data-title="ExampleModule.cs">ExampleModule.cs</span></div><div class="language-csharp line-numbers-mode" data-highlighter="prismjs" data-ext="cs"><pre><code><span class="line"><span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">DoSomethingAfterDelay</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    Mother<span class="token punctuation">.</span>Clock<span class="token punctuation">.</span><span class="token function">QueueForLater</span><span class="token punctuation">(</span></span>
<span class="line">        <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">DoSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token comment">// run the action...</span></span>
<span class="line">        <span class="token number">10</span> <span class="token comment">// ...after 10 seconds</span></span>
<span class="line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><h3 id="registering-modules" tabindex="-1"><a class="header-anchor" href="#registering-modules"><span>Registering Modules</span></a></h3><p>Mother makes it easy to register Extension Modules via the <code>RegisterModule</code> method:</p><div class="code-block-title"><div class="code-block-title-bar"><span class="title" data-title="Program.cs">Program.cs</span></div><div class="language-csharp line-numbers-mode" data-highlighter="prismjs" data-ext="cs"><pre><code><span class="line"><span class="token comment">// Instantiate module</span></span>
<span class="line"><span class="token class-name">MissileGuidanceModule</span> module <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">MissileGuidanceModule</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// Register module with Mother</span></span>
<span class="line">Mother<span class="token punctuation">.</span><span class="token function">RegisterModule</span><span class="token punctuation">(</span>module<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div class="hint-container important"><p class="hint-container-title">Important</p><p>Extension Modules must conform the the <code>IExtensionModule</code> interface.</p></div>`,5))])}const b=r(m,[["render",v],["__file","ArchitectureOverview.html.vue"]]),f=JSON.parse('{"path":"/Framework/Developer/GettingStarted/ArchitectureOverview.html","title":"Architecture Overview","lang":"en-US","frontmatter":{},"headers":[{"level":2,"title":"Entity Diagram","slug":"entity-diagram","link":"#entity-diagram","children":[]},{"level":2,"title":"Progam Lifecycle","slug":"progam-lifecycle","link":"#progam-lifecycle","children":[]},{"level":2,"title":"Command Lifecycle","slug":"command-lifecycle","link":"#command-lifecycle","children":[]},{"level":2,"title":"Mother Instance","slug":"mother-instance","link":"#mother-instance","children":[{"level":3,"title":"System Attributes","slug":"system-attributes","link":"#system-attributes","children":[]},{"level":3,"title":"Boot","slug":"boot","link":"#boot","children":[]},{"level":3,"title":"Run","slug":"run","link":"#run","children":[]},{"level":3,"title":"Registering Modules","slug":"registering-modules","link":"#registering-modules","children":[]}]}],"git":{"updatedTime":1742428082000,"contributors":[{"name":"Luke Morrison","username":"","email":"lukejamesmorrison@gmail.com","commits":1}],"changelog":[{"hash":"7c2fb0716f1b3a7b9765a5e6872cb915206257b5","time":1742428082000,"email":"lukejamesmorrison@gmail.com","author":"Luke Morrison","message":"Initial commit"}]},"filePathRelative":"Framework/Developer/GettingStarted/ArchitectureOverview.md"}');export{b as comp,f as data};
